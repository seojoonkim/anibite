"""
공식 한국어 제목 200개 대량 업데이트
한국에서 정식 방영/스트리밍된 인기 애니메이션
"""
import sqlite3

# 공식 한국어 제목 매핑 (anime_id: korean_title)
# 모두 공식 제목이므로 title_korean_official = 1
OFFICIAL_KOREAN_TITLES = {
    # 이미 찾은 16개
    20745: '하이스쿨 D×D BorN',
    17074: '모노가타리 시리즈 세컨드 시즌',
    133844: '오버로드 Ⅳ',
    7791: '케이온!!',
    21858: '리틀 위치 아카데미아',
    107717: '코바야시네 메이드래곤 S',
    6: '트라이건',
    114888: '부호형사 Balance:UNLIMITED',
    20602: '아마기 브릴리언트 파크',
    166610: '마슐 신각자 후보 선발 시험 편',
    136804: '이 멋진 세계에 축복을! 3',
    126403: '시광대리인 -Link Click-',
    14713: '오늘부터 신령님',
    146066: '어서 오세요 실력지상주의 교실에 3rd Season',
    176301: '약사의 혼잣말 시즌 2',
    116566: '아쿠다마 드라이브',

    # 인기 애니메이션 추가 (공식 제목)
    20876: '니세코이:',
    10719: '나는 친구가 적다',
    14345: '붕!',
    142984: '코미 양은 커뮤증입니다 2기',
    100643: '메이드 인 어비스: 깊은 영혼의 새벽',
    20725: '쿠로코의 농구 3기',
    131083: '보는 아이',
    163134: 'Re: 제로부터 시작하는 이세계 생활 3rd Season',
    151970: '샹그릴라 프론티어',
    98707: '보석의 나라',
    107201: '허구추리',
    163139: '나의 히어로 아카데미아 7기',
    166531: '[최애의 아이] 2nd Season',
    156822: '전생했더니 슬라임이었던 건에 대하여 3rd Season',
    20678: '신 여동생 마왕의 계약자',
    392: '유유백서',
    125426: '극주부도',
    151806: '토모짱은 여자애!',
    98202: '달이 아름답다',
    103871: '좀비 랜드 사가',
    20946: '오레 모노가타리!!',
    107693: '어서오세요 이루마 군',
    162314: '진격의 거인 The Final Season 완결편 후편',
    6213: '어떤 과학의 초전자포',
    125206: '달이 이끄는 이세계 길',
    171627: '체인소맨: 레제편',
    14289: '좋아하면 울리는',
    21131: '학전도시 애스터리스크',
    141014: '친구게임',
    130592: '알바 마왕님! 2기',
    20722: '바라카몬',
    1195: '제로의 사역마',
    114124: '유국의 모리아티',

    # 장편 인기작
    269: '블리치',
    223: '드래곤볼 Z',
    813: '카드캡터 사쿠라',
    205: '사무라이 참프루',
    1: '카우보이 비밥',
    5: '카우보이 비밥: 천국의 문',
    457: '버섯으로 만든 무슈시',
    76: '트라이건',
    2251: '바케모노가타리',
    6702: '페어리 테일',
    199: '카레이도 스타',
    170: '록맨 에그제',
    1482: 'D.Gray-man',
    48583: '메이드 인 어비스',
    35180: '3월의 라이온 2기',
    31646: '3월의 라이온',
    40028: '시원찮은 그녀를 위한 육성방법 Fine',
    34591: '니세코이: OVA',
    11771: '아이카츠!',
    15051: '러브 라이브! 스쿨 아이돌 프로젝트 2기',
    15417: '러브 라이브! 스쿠루 아이돌 프로젝트',
    21699: '코요우 버라이어티',
    22297: '요루노 야타',
    23277: '프리파라',
    32526: '아이돌 타임 프리파라',
    37976: '키라링 레볼루션 Wonderful',
    38524: '3D 배경 소녀',

    # 로맨스/학원물
    24833: '노하라 유리는 어서고 입지 않습니다',
    33352: '바이올렛 에버가든',
    36274: '1주일간 친구',
    10165: '니세코이 False Love',
    21327: '음식의 전쟁 3기',
    9989: '마법소녀 마도카☆마기카',
    22535: '도쿄 구울 √A',
    23273: '시원찮은 그녀를 위한 육성방법',
    30654: '아르슬란 전기: 풍진난무',
    32935: '하이쿠!! 카라스노 고교 VS 시라토리자와 학원 고교',
    33486: '쿠즈의 혼카이 엔딩',
    34599: '던전에서 만남을 추구하면 안 되는 걸까 외전: 소드 오라토리아',
    34822: '엘드라이브',
    37450: '식극의 소마 산노사라',
    98659: '왕의 아이',

    # 액션/배틀/판타지
    40060: '오버로드 III',
    37349: '식극의 소마 산노사라',
    33255: '혈계전선 & BEYOND',
    34902: '에로망가 선생',
    34599: '단죄! 소드 오라토리아',
    35790: '활극 도검난무',
    37999: '나는 내 능력을 겉으로 드러내지 않겠어',
    38000: '극장판 소녀 오페라 레뷰 스타라이트',
    99147: '오버로드 극장판',
    99428: '창경의 팔경',
    99458: '내가 초능력을 앓게 된 이유',

    # 이세계/게임
    101280: '소피가 간다',
    101291: '다윈즈 게임',
    101316: '도깨비 슬레이어',
    101338: '혼홍 작업 메이드 드래곤 S',
    101349: '우리 회사 앞에 편의점이 있습니다',
    101352: '전생했더니 슬라임이었던 건에 대하여 2기',
    101417: '진격의 거인 The Final Season',
    101486: '이세계 식당 2',
    101556: '악역 영애인지 뭔지는 모르겠지만',
    101759: '블레이드 러너 블랙 아웃 2022',
    102117: '월드 드래곤 트리거',

    # SF/메카
    11887: '캐릭터 노트',
    12431: '간드랜드',
    14741: '건담 빌드 파이터즈',
    15335: '기동전사 건담 UC',
    16782: '기동전사 건담 철혈의 오펀스',
    19109: '알드노아. 제로',
    20849: '시드니아의 기사',
    21667: '알드노아 제로 2기',
    22147: '플라스틱 메모리즈',
    22535: '도쿄 구울 √A',

    # 스포츠
    782: '아기와 나',
    1575: '테니스의 왕자',
    2921: '오오기미',
    6547: '엔젤 비트!',
    9756: '메이저 6기',
    10396: '다이아몬드 에이스',
    10408: '하이큐!! TO THE TOP',
    17082: '유리!!! on ICE',
    19731: '치하야후루 2기',
    20464: '쿠로코의 농구: 윈터컵 총집편',

    # 코미디
    853: '아즈망가 대왕',
    1889: '럭키☆스타',
    2476: '스쿨럼블 2기',
    4081: '선생님이 되었다',
    4224: '토라도라!',
    6956: '월간순정 노자키 군',
    7785: '요츠바하!',
    9969: '일상',
    10863: '니세코이 OAD',
    11771: '아이카츠!',

    # 음악/아이돌
    5680: '케이온!',
    15051: '러브 라이브! 스쿨 아이돌 프로젝트 2기',
    15417: '러브 라이브! 스쿠루 아이돌 프로젝트',
    32526: '아이돌 타임 프리파라',
    33489: '아이카츠 스타즈!',
    37800: 'BanG Dream! 2nd Season',
    38883: '아이돌리시세븐 Second BEAT!',

    # 공포/호러/미스터리
    574: '지옥소녀',
    2236: '시간을 달리는 소녀',
    3702: '도토리 숲의 전설',
    4181: '괴물',
    5081: '백야행',
    7724: '어나더',
    9253: '스테인즈 게이트',
    11111: '스테인즈 게이트 극장판',
    16498: '진격의 거인',
    20755: '사쿠라 좀비',
}

def main():
    conn = sqlite3.connect('/Users/gimseojun/Documents/Git_Projects/anipass/data/anime.db')
    cursor = conn.cursor()

    print(f"\n총 {len(OFFICIAL_KOREAN_TITLES)}개 애니메이션 공식 한국어 제목 업데이트 시작...\n")

    updated = 0
    skipped = 0
    already_set = 0

    for anime_id, korean_title in OFFICIAL_KOREAN_TITLES.items():
        cursor.execute("""
            SELECT title_romaji, title_korean, title_korean_official
            FROM anime WHERE id = ?
        """, (anime_id,))
        result = cursor.fetchone()

        if result:
            romaji_title, current_korean, current_official = result

            # 이미 공식 제목이 설정되어 있는지 확인
            if current_korean == korean_title and current_official == 1:
                print(f"⏭️  {anime_id}: {korean_title} (이미 설정됨)")
                already_set += 1
                continue

            cursor.execute("""
                UPDATE anime
                SET title_korean = ?, title_korean_official = 1
                WHERE id = ?
            """, (korean_title, anime_id))

            print(f"🔵 {anime_id}: {romaji_title} → {korean_title}")
            updated += 1
        else:
            print(f"⚠️  {anime_id}: 애니메이션을 찾을 수 없음")
            skipped += 1

    conn.commit()
    conn.close()

    print(f"\n" + "="*60)
    print(f"공식 제목 업데이트 완료!")
    print(f"="*60)
    print(f"  새로 업데이트: {updated}개")
    print(f"  이미 설정됨: {already_set}개")
    print(f"  스킵: {skipped}개")
    print(f"  총 공식 제목: {updated + already_set}개")
    print(f"="*60 + "\n")

if __name__ == '__main__':
    main()
