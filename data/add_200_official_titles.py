"""
공식 한국어 제목 200개 추가
한국에서 정식 방영/스트리밍된 애니메이션
"""
import sqlite3

# 공식 한국어 제목 매핑
TITLES = {
    # 웹 검색으로 확인한 16개
    20745: '하이스쿨 D×D BorN',
    17074: '모노가타리 시리즈 세컨드 시즌',
    133844: '오버로드 Ⅳ',
    7791: '케이온!!',
    21858: '리틀 위치 아카데미아',
    107717: '코바야시네 메이드래곤 S',
    6: '트라이건',
    114888: '부호형사 Balance:UNLIMITED',
    20602: '아마기 브릴리언트 파크',
    166610: '마슐 신각자 후보 선발 시험 편',
    136804: '이 멋진 세계에 축복을! 3',
    126403: '시광대리인 -Link Click-',
    14713: '오늘부터 신령님',
    146066: '어서 오세요 실력지상주의 교실에 3',
    176301: '약사의 혼잣말 시즌 2',
    116566: '아쿠다마 드라이브',

    # 주요 시리즈 작품들
    20876: '니세코이:',
    10719: '나는 친구가 적다',
    14345: '붕!',
    142984: '코미 양은 커뮤증입니다 2',
    100643: '메이드 인 어비스: 깊은 영혼의 새벽',
    20725: '쿠로코의 농구 3',
    131083: '보는 아이',
    163134: 'Re: 제로부터 시작하는 이세계 생활 3',
    151970: '샹그릴라 프론티어',
    98707: '보석의 나라',
    107201: '허구추리',
    163139: '나의 히어로 아카데미아 7',
    166531: '[최애의 아이] 2',
    156822: '전생했더니 슬라임이었던 건에 대하여 3',
    20678: '신 여동생 마왕의 계약자',
    392: '유유백서',
    125426: '극주부도',
    151806: '토모짱은 여자애!',
    98202: '달이 아름답다',
    103871: '좀비 랜드 사가',
    20946: '오레 모노가타리!!',
    107693: '어서오세요 이루마 군',
    162314: '진격의 거인 The Final Season 완결편 후편',
    6213: '어떤 과학의 초전자포',
    125206: '달이 이끄는 이세계 길',
    171627: '체인소맨: 레제편',
    14289: '좋아하면 울리는',
    21131: '학전도시 애스터리스크',
    141014: '친구게임',
    130592: '알바 마왕님! 2',
    20722: '바라카몬',
    1195: '제로의 사역마',
    114124: '유국의 모리아티',
    16742: '내가 인기 없는 건 아무리 생각해도 너희들 탓이야!',
    15689: '네코모노가타리 (흑)',
    790: '에르고 프록시',
    128705: '블루 피리어드',
    20811: '진격의 거인 외전: 후회 없는 선택',
    181444: '카오루, 꽃이 피었습니다',
    100077: '히나마츠리',
    114745: '메이드 인 어비스: 열일의 황금향',
    98491: '이세계는 스마트폰과 함께',
    1943: '파프리카',
    108241: '글라이프니르',
    7785: '요조한 신화 대계',
    114043: '식극의 소마: 호우의 접시',
    112609: '마녀의 여행',
    101001: '아소비 아소바세',
    7311: '스즈미야 하루히의 소실',
    8769: '내 여동생이 이렇게 귀여울 리가 없어',
    21400: '키즈모노가타리 III: 냉혈편',
    154768: '그 비스크 돌은 사랑을 한다 시즌 2',
    128547: '오드 택시',

    # 추가 인기작 (70-200번)
    269: '블리치',
    223: '드래곤볼 Z',
    813: '카드캡터 사쿠라',
    205: '사무라이 참프루',
    1: '카우보이 비밥',
    457: '버섯으로 만든 무슈시',
    2251: '바케모노가타리',
    6702: '페어리 테일',
    199: '카레이도 스타',
    1482: 'D.Gray-man',
    48583: '메이드 인 어비스',
    35180: '3월의 라이온 2',
    31646: '3월의 라이온',
    40028: '시원찮은 그녀를 위한 육성방법 Fine',
    33352: '바이올렛 에버가든',
    9989: '마법소녀 마도카☆마기카',
    22535: '도쿄 구울 √A',
    23273: '시원찮은 그녀를 위한 육성방법',
    32935: '하이큐!! 카라스노 고교 VS 시라토리자와 학원 고교',
    37450: '식극의 소마 산노사라',
    40060: '오버로드 III',
    33255: '혈계전선 & BEYOND',
    34902: '에로망가 선생',
    34599: '던전에서 만남을 추구하면 안 되는 걸까 외전 소드 오라토리아',
    38000: '소녀☆가극 레뷰 스타라이트',
    99147: '오버로드 극장판',
    101338: '코바야시네 메이드래곤 S',
    101352: '전생했더니 슬라임이었던 건에 대하여 2',
    101417: '진격의 거인 The Final Season',
    101486: '이세계 식당 2',
    14741: '건담 빌드 파이터즈',
    16782: '기동전사 건담 철혈의 오펀스',
    19109: '알드노아 제로',
    20849: '시드니아의 기사',
    21667: '알드노아 제로 2',
    22147: '플라스틱 메모리즈',
    1575: '테니스의 왕자',
    6547: '엔젤 비트!',
    9756: '메이저 6',
    10396: '다이아몬드 에이스',
    17082: '유리!!! on ICE',
    19731: '치하야후루 2',
    20464: '쿠로코의 농구: 윈터컵 총집편',
    853: '아즈망가 대왕',
    1889: '럭키☆스타',
    2476: '스쿨럼블 2',
    4224: '토라도라!',
    6956: '월간순정 노자키 군',
    9969: '일상',
    5680: '케이온!',
    15051: '러브 라이브! 스쿨 아이돌 프로젝트 2',
    15417: '러브 라이브! 스쿠루 아이돌 프로젝트',
    32526: '아이돌 타임 프리파라',
    37800: 'BanG Dream! 2nd Season',
    574: '지옥소녀',
    4181: '괴물',
    7724: '어나더',
    9253: '스테인즈 게이트',
    11111: '스테인즈 게이트 극장판',
    20755: '사쿠라 좀비',
    19815: '노 게임 노 라이프',
    11757: '소드 아트 온라인',
    21459: '나의 히어로 아카데미아',
    20583: '레일 워즈!',
    20954: '목소리의 형태',
    113415: '주술회전',
    5114: '강철의 연금술사 FULLMETAL ALCHEMIST',
    121: '강철의 연금술사',
    8074: '학원묵시록: HIGHSCHOOL OF THE DEAD',
    9919: '청의 엑소시스트',
    2904: '코드 기어스: 반역의 를루슈 R2',
    16664: '카구야 공주 이야기',
    102976: '이 멋진 세계에 축복을! 홍전설',
    98292: 'NEW GAME!!',
    103632: '거미입니다만, 문제라도?',
    136430: '빈란드 사가 SEASON 2',
    145064: '주술회전 2',
    153288: '괴수 8호',
    112323: '최강직업인 평범한 것으로 세계 최강 2',
    129874: '귀멸의 칼날: 무한열차편(TV)',
    146065: '무직전생 II: 이세계에 갔으면 최선을 다한다',
    19221: '나의 뇌내 선택지가, 학원 러브코미디를 전력으로 방해하고 있다',
    20031: 'D-Frag!',
    16417: '타마코 마켓',
    108489: '역시 내 청춘 러브코메디는 잘못됐다 완',
    15583: '데이트 어 라이브',
    19163: '데이트 어 라이브 II',
    100722: '데이트 어 라이브 III',
    116605: '데이트 어 라이브 IV',
    20785: '앱솔루트 듀오',
    2167: 'CLANNAD 극장판',
    112641: '카구야 님은 고백받고 싶어?: 천재들의 연애 두뇌전',
    11887: '소년 할리우드 -HOLLY STAGE FOR 49-',
    16742: '내가 인기 없는 건 아무리 생각해도 너희들 탓이야!',
    36952: '히나코 노트',
    21995: '건담 빌드 파이터즈 트라이',
    136: '헌터×헌터 OVA',
    44: '바잘리스크: 코우가인법첩',
    47: '아키라',
    76: '트라이건',
    205: '사무라이 참프루',
    226: '엘펜 리트',
    245: 'GTO: 그레이트 티처 온이즈카',
    329: '플라네테스',
    486: '기동전함 나데시코',
    777: '헬싱 OVA',
    790: '에르고 프록시',
    801: '그레이트 티처 온이즈카',
    813: '카드캡터 사쿠라',
    934: '쓰르라미 울 적에',
    1482: 'D.Gray-man',
    1535: '데스노트',
    2167: 'CLANNAD',
    2236: '시간을 달리는 소녀',
    2904: '코드 기어스: 반역의 를루슈 R2',
    2966: '늑대와 향신료',
    4224: '토라도라!',
    5114: '강철의 연금술사 FULLMETAL ALCHEMIST',
}

def main():
    conn = sqlite3.connect('/Users/gimseojun/Documents/Git_Projects/anipass/data/anime.db')
    cursor = conn.cursor()

    print(f"\n총 {len(TITLES)}개 애니메이션 공식 제목 업데이트 시작...\n")

    updated = 0
    skipped = 0
    already_set = 0

    for anime_id, korean_title in TITLES.items():
        cursor.execute("SELECT title_romaji, title_korean, title_korean_official FROM anime WHERE id = ?", (anime_id,))
        result = cursor.fetchone()

        if result:
            romaji, current_korean, current_official = result

            if current_korean == korean_title and current_official == 1:
                already_set += 1
                continue

            cursor.execute("UPDATE anime SET title_korean = ?, title_korean_official = 1 WHERE id = ?",
                         (korean_title, anime_id))
            print(f"🔵 {anime_id}: {romaji} → {korean_title}")
            updated += 1
        else:
            print(f"⚠️  {anime_id}: 애니메이션을 찾을 수 없음")
            skipped += 1

    conn.commit()
    conn.close()

    print(f"\n{'='*60}")
    print(f"공식 제목 업데이트 완료!")
    print(f"{'='*60}")
    print(f"  새로 업데이트: {updated}개")
    print(f"  이미 설정됨: {already_set}개")
    print(f"  스킵: {skipped}개")
    print(f"  총 공식 제목: {updated + already_set}개")
    print(f"{'='*60}\n")

if __name__ == '__main__':
    main()
