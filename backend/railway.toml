[build]
builder = "nixpacks"

[deploy]
# Build is handled by nixpacks.toml at project root
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 10

# CRITICAL: Mount /app/data as persistent volume
# This prevents data loss between deployments
[[deploy.volumes]]
mountPath = "/app/data"

# Mount /app/uploads for user-uploaded images (admin editor)
[[deploy.volumes]]
mountPath = "/app/uploads"
